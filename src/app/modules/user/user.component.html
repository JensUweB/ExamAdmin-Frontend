<div class="container">
  <div class="row">
    <div class="col-md-12">
      <h1>My Profile</h1>
    </div>
  </div>
  <div class="row">
    <div class="col-6">
      <h3>Personal data:</h3>
      <form>
        <div class="row">
          <div class="col-sm">
            <div class="row">
              <div class="col-sm">
                <label for="firstName">First Name:</label>
              </div>
              <div class="col-sm">
                <input class="form-control" type="text" placeholder="{{user.firstName}}" name="firstName">
              </div>
            </div>
            <div class="row">
              <div class="col-sm">
                <label for="lastName">Last Name:</label>
              </div>
              <div class="col-sm">
                <input class="form-control" type="text" placeholder="{{user.lastName}}" name="lastName">
              </div>
            </div>
            <div class="row">
              <div class="col-sm">
                <label for="email">E-Mail:</label>
              </div>
              <div class="col-sm">
                <input class="form-control" type="text" placeholder="{{user.email}}" name="email">
              </div>
            </div>
            <div class="row">
              <div class="col-sm">
                <label for="oldPassword">Old Password:</label>
              </div>
              <div class="col-sm">
                <input class="form-control" type="password" placeholder="old password" id="oldPassword"  name="oldPassword">
              </div>
            </div>
            <div class="row">
              <div class="col-sm">
                <label for="newPassword">New Password:</label>
              </div>
              <div class="col-sm">
                <input class="form-control" type="password" placeholder="new password" id="password" name="newPassword">
              </div>
            </div>
            <div class="row">
              <div class="col-sm">
                <label for="repeatPassword">Repeat Password:</label>
              </div>
              <div class="col-sm">
                <input class="form-control" type="password" placeholder="confirm new password" id="password2" name="repeatPassword">
              </div>
            </div>
            <div class="row">
              <div class="col-sm">
                <input class="form-control" type="submit" value="Change!" class="btn btn-sm btn-primary">
              </div>
            </div>
          </div>
        </div>
      </form>
    </div>
    <div class="col-6">
      <div class="row">
        <div class="col-8">
          <h4>Your Clubs:</h4>
        </div>
        <div class="col-4">
          <button type="button" class="btn btn-sm btn-success" (click)="openAddClub(content)">Add</button>
        </div>
      </div>
      <div class="row">
        <div class="col-sm">
          <a href="/user/#">{{user.clubs[0].club.name}}</a>
        </div>
      </div>
      <hr>
      <div class="row">
        <div class="col-8">
          <h4>Your Martial Arts:</h4>
        </div>
        <div class="col-4">
          <button type="button" class="btn btn-sm btn-success">Add</button>
        </div>
      </div>
      <div *ngFor="let martialArt of user.martialArts" class="row">
        <div class="col-8">
          <a href="/user/#">{{martialArt._id.styleName}} {{martialArt._id.name}}</a>
        </div>
        <div class="col-4">
          <b>{{martialArt.rankName}}</b>
        </div>
      </div>
    </div>
  </div>
  <br>
  <br>
  <div class="row">
    <div class="col">
      <h4>Exam Results:</h4>
    </div>
  </div>
  <div class="row">
    <div class="col">
      <table class="table table-striped">
        <thead class="thead-dark">
          <tr>
            <th>Martial Art</th>
            <th>Rank</th>
            <th>Result</th>
            <th>Date</th>
            <th>Protocol</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let result of examResults">
            <th>{{result.martialArt.styleName}} {{result.martialArt.name}}</th>
            <th>{{result.rank}}</th>
            <th *ngIf="result.passed">passed</th>
            <th *ngIf="!result.passed">failed</th>
            <th>{{result.date}}</th>
            <th><a class="btn btn-sm btn-warning" (click)="getReport()">download</a></th>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

<ng-template #content let-c="close" let-d="dismiss">
  <div class="modal-header">
    <h4 class="modal-title" id="modal-basic-title">Add a Club</h4>
    <button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <p>Hello, {{user.firstName}}!<br>
    Here you can add a new club to your profile, if you want!</p>
    <form [formGroup]="clubForm">
      <div class="form-group">
        <label>CLub list</label>
        <select class="form-control" formControlName="clubId">
          <option *ngFor="let club of clubs" [value]="club._id">{{club.name}}</option>
        </select>
      </div>
    </form>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-success" (click)="onClubSubmit(); c('Save click')">Add Club</button>
  </div>
</ng-template>